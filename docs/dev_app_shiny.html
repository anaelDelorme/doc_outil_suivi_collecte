<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.28">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Outil de suivi de collecte MASA - 4&nbsp; Développement application shiny</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./squellete_appli.html" rel="next">
<link href="./donnees.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Développement application shiny</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Outil de suivi de collecte MASA</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/anaelDelorme/doc_outil_suivi_collecte" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="./outil_suivi_collecte_masa.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Préface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prerequis.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Prérequis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./donnees.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Données</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dev_app_shiny.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Développement application shiny</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./squellete_appli.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Squelette de l’application Shiny</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./add_box.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ajout de box dans une page</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./add_shinymanager.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">add_shinymanager.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./docker.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">docker.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deploy.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">deploy.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debug.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">debug.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#création-dun-repo-github" id="toc-création-dun-repo-github" class="nav-link active" data-scroll-target="#création-dun-repo-github"> <span class="header-section-number">4.1</span> Création d’un repo Github</a></li>
  <li><a href="#création-dun-service-rstudio-dans-le-datalab" id="toc-création-dun-service-rstudio-dans-le-datalab" class="nav-link" data-scroll-target="#création-dun-service-rstudio-dans-le-datalab"> <span class="header-section-number">4.2</span> Création d’un service Rstudio dans le datalab</a></li>
  <li><a href="#installation-des-packages-utiles" id="toc-installation-des-packages-utiles" class="nav-link" data-scroll-target="#installation-des-packages-utiles"> <span class="header-section-number">4.3</span> Installation des packages utiles</a></li>
  <li><a href="#création-du-projet-golem" id="toc-création-du-projet-golem" class="nav-link" data-scroll-target="#création-du-projet-golem"> <span class="header-section-number">4.4</span> Création du projet Golem</a></li>
  <li><a href="#paramétrage-golem-de-votre-package" id="toc-paramétrage-golem-de-votre-package" class="nav-link" data-scroll-target="#paramétrage-golem-de-votre-package"> <span class="header-section-number">4.5</span> Paramétrage Golem de votre package</a></li>
  <li><a href="#commit-et-push-dans-github" id="toc-commit-et-push-dans-github" class="nav-link" data-scroll-target="#commit-et-push-dans-github"> <span class="header-section-number">4.6</span> Commit et push dans github</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/anaelDelorme/doc_outil_suivi_collecte/edit/main/dev_app_shiny.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Développement application shiny</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>L’application de suivi de collecte est une application shiny que nous allons déployer dans le datalab.</p>
<p>Pour cela nous préconisons quelques principes :</p>
<ul>
<li>utiliser le package <a href="https://github.com/ThinkR-open/golem">Golem</a> développé par Thinkr. Il encapsule l’application shiny dans un package avec un objectif de mise en production (inclusion de tout ce qui est utile au déploiement).<br>
</li>
<li>utiliser le datalab pour développer l’application.<br>
</li>
<li>stocker les programmes dans GitHub.</li>
</ul>
<p>Cette partie de la documentation explique la mise en place de tout ce qu’il faut pour développer l’application. Dans les prochaines parties nous développerons le squelette du site de suivi, puis nous le peuplerons avec des box.</p>
<section id="création-dun-repo-github" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="création-dun-repo-github"><span class="header-section-number">4.1</span> Création d’un repo Github</h2>
<p>Ce repo est le lieu de stockage des programmes du site de suivi de collecte. La création de repo est réalisé par l’un des membres de l’équipe avec son compte github (voir <a href="./prerequis.html">Prérequis</a>) :</p>
<ul>
<li>Se connecter à <a href="https://github.com/">Github</a></li>
<li>Créer un nouveau repository</li>
</ul>
<p><img src="images/github_new_repository.png" class="img-fluid"></p>
<ul>
<li>saisir le nom du repo</li>
</ul>
<p><img src="images/github_name_repository.png" class="img-fluid"></p>
<ul>
<li>laisser tout le reste tel que proposé et cliquer sur <strong>Create repository</strong></li>
</ul>
<p>Vous arrivez sur la page d’accueil du repo. Vous pouvez ici ajouter vos collègues dans la rubrique <strong>Add collaborators to this repository</strong>.</p>
<p>Avant de passer à la création du service Rstudio dans le datalab, copier l’adresse du repo qui est disponible dans le Quick setup : dans l’exemple ce sera <em>https://github.com/anaelDelorme/suivi_collecte_esea.git</em> <img src="images/github_copy_link.png" class="img-fluid"></p>
</section>
<section id="création-dun-service-rstudio-dans-le-datalab" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="création-dun-service-rstudio-dans-le-datalab"><span class="header-section-number">4.2</span> Création d’un service Rstudio dans le datalab</h2>
<p>Vous pourriez tout à fait travailler sur Cerise ou sur votre poste local. Nous vous proposons de travailler sur le datalab directement : vous avez accès à une configuration proche de celle du déploiement de votre site. Et nous vous conseillons d’utiliser un VSCode plutôt qu’un Rstudio.</p>
<p>Après vous être connecté au datalab, vous aller dans <em>Mes services</em>.</p>
<p><img src="images/datalab_mes_services.png" class="img-fluid"></p>
<p>Puis vous cliquer sur <em>Nouveau service</em> :</p>
<p><img src="images/datalab_nouveau_service.png" class="img-fluid"></p>
<p>Vous choisissez un Vscode-r-python-julia. Là nous utiliserons Rstudio en cliquant sur Lancer :</p>
<p><img src="images/datalab_vscode_service.png" class="img-fluid"></p>
<p>Avant de lancer le service nous conseillons de le configurer en ouvrant la boite <em>Configuration Vscode</em>, puis d’aller dans l’onglet <em>Git</em>. Il faut recopier dans Repository le lien du repo copié précédemment et vérifier les identifiants et token github :</p>
<p><img src="images\conf_git_vscode.png" class="img-fluid"></p>
<p>Puis clikquer sur <em>Lancer</em>. Après quelques instants le service Vscode sera disponible et vous pourrez vous y connectant avec le mot de passe indiqué à l’écran.</p>
<p>Si tout s’est bien passé, vous arrivez dans un Vscode classique avec un répertoire vide correspondant au répertoire du Github.</p>
</section>
<section id="installation-des-packages-utiles" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="installation-des-packages-utiles"><span class="header-section-number">4.3</span> Installation des packages utiles</h2>
<p>La création d’un site de suivi de collecte nécessite l’installation de packages. Pour cela, ouvrez un terminal VScode :</p>
<p><img src="images\VSCode_new_terminal.png" class="img-fluid"></p>
<p>Tapez r pour indiquer que vous allez saisir une commande R. Puis lancer la ligne de code suivante.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"arrow"</span>, <span class="st">"shiny"</span>, <span class="st">"shinyWidgets"</span>, <span class="st">"bs4Dash"</span>, <span class="st">"shinymanager"</span>, <span class="st">"leaflet"</span>, <span class="st">"config"</span>, <span class="st">"DT"</span>, <span class="st">"echarts4r"</span>, <span class="st">"geojsonio"</span>, <span class="st">"glue"</span>, <span class="st">"golem"</span>, <span class="st">"htmlwidgets"</span>, <span class="st">"janitor"</span>, <span class="st">"sf"</span>, <span class="st">"testthat"</span>, <span class="st">"geojsonio"</span>, <span class="st">"dockerfiler"</span>, <span class="st">"attachment"</span>, <span class="st">"rsconnect"</span>, <span class="st">"spelling"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="création-du-projet-golem" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="création-du-projet-golem"><span class="header-section-number">4.4</span> Création du projet Golem</h2>
<p>Allez dans le répertoire créé dans votre Rstudio, créer un répertoire <em>suiviCollecte</em>, puis créer un fichier <em>init.R</em> et indiquez la ligne de code suivante :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">create_golem</span>(<span class="at">path =</span> <span class="st">"../suiviCollecte"</span>, <span class="at">check_name =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lancez la commande.</p>
<p>Vous obtenez un répertoire suiviCollecte dans votre répertoire suivi_collecte_XXX qui sera votre répertoire de travail pour créer votre application shiny. Si le répertoire suiviCollecte n’est pas créé comme sous-répertoire de suivi_collecte_XXX, déplacer le.</p>
</section>
<section id="paramétrage-golem-de-votre-package" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="paramétrage-golem-de-votre-package"><span class="header-section-number">4.5</span> Paramétrage Golem de votre package</h2>
<p>Le principe de Golem est d’encapsuler l’application shiny dans un package. Il y a quelques étapes à suivre afin de commencer à développer l’application shiny. Dans le répertoire Dev, ouvrez le fichier 01_start puis modifier et lancer les différentes commandes:</p>
<ul>
<li>Description du package :</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">fill_desc</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">pkg_name =</span> <span class="st">"suiviCollecte"</span>, <span class="co"># The Name of the package containing the App</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pkg_title =</span> <span class="st">"Suivi de la collecte ESEA"</span>, <span class="co"># The Title of the package containing the App</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pkg_description =</span> <span class="st">"Site web de suivi de la collecte de l'enquête ESEA"</span>, <span class="co"># The Description of the package containing the App</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">author_first_name =</span> <span class="st">"Anaël"</span>, <span class="co"># Your First Name</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">author_last_name =</span> <span class="st">"Delorme"</span>, <span class="co"># Your Last Name</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">author_email =</span> <span class="st">"anael.delorme@agriculture.gouv.Fr"</span>, <span class="co"># Your Email</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">repo_url =</span> <span class="st">"https://github.com/anaelDelorme/suivi_collecte_esea"</span>, <span class="co"># The URL of the GitHub Repo (optional),</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">pkg_version =</span> <span class="st">"0.0.0.9000"</span> <span class="co"># The Version of the package containing the App</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Lancement des commandes utiles :</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">#################### A LANCER</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Set {golem} options ----</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">set_golem_options</span>()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Install the required dev dependencies ----</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">install_dev_deps</span>()</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Create Common Files ----</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="do">## See ?usethis for more information</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_mit_license</span>(<span class="st">"Golem User"</span>) <span class="co"># You can set another license here</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_readme_rmd</span>(<span class="at">open =</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build_readme</span>()</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that `contact` is required since usethis version 2.1.5</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># If your {usethis} version is older, you can remove that param</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_code_of_conduct</span>(<span class="at">contact =</span> <span class="st">"Golem User"</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_lifecycle_badge</span>(<span class="st">"Experimental"</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_news_md</span>(<span class="at">open =</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="do">## Init Testing Infrastructure ----</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="do">## Create a template for tests</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">use_recommended_tests</span>()</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="do">## Favicon ----</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co"># If you want to change the favicon (default is golem's one)</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">use_favicon</span>() <span class="co"># path = "path/to/ico". Can be an online file.</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co"># golem::remove_favicon() # Uncomment to remove the default favicon</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="do">## Add helper functions ----</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">use_utils_ui</span>(<span class="at">with_test =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">use_utils_server</span>(<span class="at">with_test =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="do">################## NE PAS LANCER</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="do">## Use git ----</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Dans le répertoire Dev, ouvrez le fichier 02_start puis lancer les différentes commandes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">### A Lancer :</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>attachment<span class="sc">::</span><span class="fu">att_amend_desc</span>()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Creates fct_* and utils_*</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">add_fct</span>(<span class="st">"helpers"</span>, <span class="at">with_test =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">add_utils</span>(<span class="st">"helpers"</span>, <span class="at">with_test =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Vignette ----</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_vignette</span>(<span class="st">"suiviCollecte"</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build_vignettes</span>()</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="do">############## Ne pas lancer le reste</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="commit-et-push-dans-github" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="commit-et-push-dans-github"><span class="header-section-number">4.6</span> Commit et push dans github</h2>
<p>Vous êtes prêts à lancer le développement de votre application shiny. Nous vous recommandons de faire un commit / push de votre code dans Github. Pour cela il faut :</p>
<ul>
<li>aller dans *Source control” :</li>
</ul>
<p><img src="images/vscode_first_git.png" class="img-fluid"></p>
<ul>
<li>là il faut indiquer que tous les fichiers doivent être dans le commit et envoyés dans Github. En langague git, c’est <em>stage all changes</em>. Dans VScode c’est le bouton + à droite de <em>Changes</em>.</li>
</ul>
<p><img src="images/vscode_stade_all_changes.png" class="img-fluid"></p>
<ul>
<li>indiquer un libellé de commit puis à droite du Commit, choisir Commit &amp; Push.</li>
</ul>
<p><img src="images/golem_commit_and_push.png" class="img-fluid"></p>
<ul>
<li>vérifiez dans Github que le code a bien été envoyé.</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./donnees.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Données</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./squellete_appli.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Squelette de l’application Shiny</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>